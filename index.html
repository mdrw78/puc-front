<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABC Auto Advisor - Document Management</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; }
        
        /* Sidebar Styling */
        .sidebar {
            width: 260px;
            background-color: #111827; /* slate-900 */
            color: white;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            height: 64px;
            display: flex;
            align-items: center;
            padding: 0 24px;
            border-bottom: 1px solid #374151;
        }

        .nav-link {
            color: #d1d5db; /* slate-300 */
            padding: 10px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            text-decoration: none;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background-color: #1f2937; /* slate-800 */
            color: white;
        }

        .nav-link.active {
            background-color: #2563eb; /* blue-600 */
            color: white;
            border-right: 4px solid #60a5fa; /* blue-400 */
        }

        .nav-section-title {
            padding: 0 24px;
            margin-top: 24px;
            margin-bottom: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            color: #6b7280; /* slate-500 */
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .badge-custom {
            background-color: #374151; /* slate-700 */
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 9999px;
        }

        /* Main Content Area */
        .main-content {
            margin-left: 260px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .top-header {
            height: 64px;
            background-color: white;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            flex-shrink: 0;
        }

        .content-scrollable {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }

        /* Excel-like Table Styling */
        .table-container {
            overflow-x: auto;
            position: relative;
        }

        .excel-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .excel-table th {
            background-color: #f3f4f6;
            color: #374151;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border: 1px solid #e5e7eb;
            padding: 8px 12px;
            white-space: nowrap;
        }

        .excel-table td {
            border: 1px solid #e5e7eb;
            padding: 6px 12px;
            white-space: nowrap;
            position: relative;
        }
        
        .excel-table td:hover {
            border: 1px solid #3b82f6;
            cursor: cell;
        }

        .excel-table td input {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            background: transparent;
            font-size: inherit;
            padding: 0;
            margin: 0;
        }

        /* Status Colors */
        .row-expired { background-color: #fee2e2 !important; } /* Red-100 */
        .row-expiring-soon { background-color: #fef9c3 !important; } /* Yellow-100 */
        .cell-na { color: #9ca3af; font-style: italic; }
        
        /* Sticky Columns */
        .sticky-col-left {
            position: sticky;
            left: 0;
            background-color: inherit;
            z-index: 10;
        }
        .sticky-col-left-2 {
            position: sticky;
            left: 35px;
            background-color: inherit;
            z-index: 10;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8; 
        }

        /* Card Hover Effects */
        .summary-card {
            transition: all 0.2s;
        }
        .summary-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Responsive Styles */
        @media (max-width: 991.98px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
            }
            .sidebar.show {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
            }
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 999;
                opacity: 0;
                transition: opacity 0.3s ease-in-out;
            }
            .sidebar-overlay.show {
                display: block;
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar shadow" id="sidebar">
        <div class="sidebar-header">
            <i class="fa-solid fa-car-side text-info me-3 fs-5"></i>
            <span class="fw-bold fs-5 tracking-wide">Auto Advisor</span>
        </div>

        <div class="flex-grow-1 overflow-auto py-3">
            <div class="nav-section-title">Main</div>
            <a href="#" class="nav-link active">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-gauge-high w-6 me-2"></i>
                    <span>Dashboard</span>
                </div>
            </a>

            <div class="nav-section-title">By Vehicle Type</div>
            
            <a href="#" class="nav-link">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-car w-6 me-2 text-secondary"></i> Private Car
                </div>
                <span class="badge-custom">350</span>
            </a>
            <a href="#" class="nav-link">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-taxi w-6 me-2 text-secondary"></i> Commercial
                </div>
                <span class="badge-custom">120</span>
            </a>
            <a href="#" class="nav-link">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-bus w-6 me-2 text-secondary"></i> Bus
                </div>
                <span class="badge-custom">45</span>
            </a>
            <a href="#" class="nav-link">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-truck w-6 me-2 text-secondary"></i> Truck
                </div>
                <span class="badge-custom">80</span>
            </a>
            <a href="#" class="nav-link">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-motorcycle w-6 me-2 text-secondary"></i> Two-wheeler
                </div>
                <span class="badge-custom">410</span>
            </a>
            <a href="#" class="nav-link">
                <div class="d-flex align-items-center">
                    <i class="fa-solid fa-van-shuttle w-6 me-2 text-secondary"></i> Other Commercial
                </div>
                <span class="badge-custom">195</span>
            </a>

            <div class="nav-section-title">By Customer</div>
            <div class="px-4 mb-3">
                <div class="position-relative">
                    <input type="text" placeholder="Search Client..." class="form-control form-control-sm bg-dark text-white border-secondary ps-4">
                    <i class="fa-solid fa-search position-absolute top-50 start-0 translate-middle-y ms-2 text-secondary small"></i>
                </div>
            </div>
        </div>

        <div class="p-3 border-top border-secondary">
            <div class="d-flex align-items-center gap-3">
                <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center text-white fw-bold" style="width: 32px; height: 32px;">A</div>
                <div class="small">
                    <p class="fw-semibold mb-0">Admin User</p>
                    <p class="text-secondary mb-0" style="font-size: 0.75rem; cursor: pointer;">Logout</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        
        <!-- Header -->
        <header class="top-header shadow-sm">
            <div class="d-flex align-items-center gap-3">
                <button class="btn btn-light d-lg-none border-0" id="sidebarToggle">
                    <i class="fa-solid fa-bars fs-5"></i>
                </button>
                <h1 class="h5 fw-bold text-dark mb-0">Dashboard Overview</h1>
            </div>
            
            <div class="d-flex gap-2">
                <button class="btn btn-success btn-sm d-flex align-items-center gap-2 fw-medium">
                    <i class="fa-solid fa-file-excel"></i> Import Excel
                </button>
                <button class="btn btn-primary btn-sm d-flex align-items-center gap-2 fw-medium">
                    <i class="fa-solid fa-plus"></i> Add Vehicle
                </button>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="content-scrollable bg-light">
            
            <!-- Summary Cards -->
            <div class="row g-4 mb-4">
                <div class="col-md-3">
                    <div class="card border-0 shadow-sm summary-card h-100">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div>
                                <p class="text-secondary text-uppercase fw-bold small mb-1">Total Vehicles</p>
                                <h3 class="fw-bold text-dark mb-0">1,200</h3>
                            </div>
                            <div class="rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center text-primary" style="width: 48px; height: 48px;">
                                <i class="fa-solid fa-car fs-5"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card border-warning shadow-sm summary-card h-100 bg-warning bg-opacity-10">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div>
                                <p class="text-warning text-uppercase fw-bold small mb-1" style="filter: brightness(0.8);">Expiring (5 Days)</p>
                                <h3 class="fw-bold text-dark mb-0" style="color: #854d0e;">12</h3>
                            </div>
                            <div class="rounded-circle bg-warning bg-opacity-25 d-flex align-items-center justify-content-center text-warning" style="width: 48px; height: 48px; filter: brightness(0.9);">
                                <i class="fa-solid fa-clock fs-5"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card border-danger shadow-sm summary-card h-100 bg-danger bg-opacity-10">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div>
                                <p class="text-danger text-uppercase fw-bold small mb-1">Already Expired</p>
                                <h3 class="fw-bold text-danger mb-0">5</h3>
                            </div>
                            <div class="rounded-circle bg-danger bg-opacity-25 d-flex align-items-center justify-content-center text-danger" style="width: 48px; height: 48px;">
                                <i class="fa-solid fa-triangle-exclamation fs-5"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card border-0 shadow-sm summary-card h-100">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div>
                                <p class="text-secondary text-uppercase fw-bold small mb-1">Total Clients</p>
                                <h3 class="fw-bold text-dark mb-0">400</h3>
                            </div>
                            <div class="rounded-circle bg-success bg-opacity-10 d-flex align-items-center justify-content-center text-success" style="width: 48px; height: 48px;">
                                <i class="fa-solid fa-users fs-5"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Required Section -->
            <div class="d-flex flex-column gap-4">
                
                <!-- Expired Documents Table -->
                <div class="card border-danger shadow-sm overflow-hidden">
                    <div class="card-header bg-danger bg-opacity-10 border-danger d-flex justify-content-between align-items-center py-3">
                        <h2 class="h6 text-danger fw-bold mb-0 d-flex align-items-center gap-2">
                            <i class="fa-solid fa-circle-exclamation"></i> Already Expired Documents
                        </h2>
                        <span class="badge bg-danger bg-opacity-25 text-danger rounded-pill">5 Vehicles</span>
                    </div>
                    <div class="table-container">
                        <table class="excel-table">
                            <thead>
                                <tr>
                                    <th class="sticky-col-left bg-light" style="width: 40px;"><input type="checkbox" class="form-check-input"></th>
                                    <th class="sticky-col-left-2 bg-light" style="width: 100px;">Actions</th>
                                    <th>Vehicle No</th>
                                    <th>Client Name</th>
                                    <th>Mobile</th>
                                    <th>Type</th>
                                    <th>RC Expiry</th>
                                    <th>TP Insurance</th>
                                    <th>Comp. Insurance</th>
                                    <th>PUC (Petrol)</th>
                                    <th>PUC (Diesel)</th>
                                    <th>Fitness (New)</th>
                                    <th>Fitness (5yr+)</th>
                                    <th>Permit (State)</th>
                                    <th>Permit (India)</th>
                                    <th>Tax</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="row-expired">
                                    <td class="sticky-col-left text-center row-expired"><input type="checkbox" class="form-check-input"></td>
                                    <td class="sticky-col-left-2 row-expired text-center">
                                        <button onclick="openModal('GJ01AB1234', 'John Doe')" class="btn btn-link p-0 text-primary me-2" title="Send Reminder"><i class="fa-brands fa-whatsapp fs-6"></i></button>
                                        <button class="btn btn-link p-0 text-secondary" title="Edit"><i class="fa-solid fa-pen"></i></button>
                                    </td>
                                    <td class="fw-bold">GJ01AB1234</td>
                                    <td>John Doe</td>
                                    <td>9876543210</td>
                                    <td>Private Car</td>
                                    <td class="text-danger fw-bold">12-12-2025</td> 
                                    <td>15-01-2026</td>
                                    <td>15-01-2026</td>
                                    <td class="cell-na">N/A</td>
                                    <td>20-02-2026</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td>01-01-2026</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Upcoming Expiry Table -->
                <div class="card border-warning shadow-sm overflow-hidden">
                    <div class="card-header bg-warning bg-opacity-10 border-warning d-flex justify-content-between align-items-center py-3">
                        <h2 class="h6 text-warning fw-bold mb-0 d-flex align-items-center gap-2" style="color: #854d0e;">
                            <i class="fa-solid fa-clock"></i> Expiring Within 5 Days
                        </h2>
                        <span class="badge bg-warning bg-opacity-25 text-warning rounded-pill" style="color: #854d0e !important;">12 Vehicles</span>
                    </div>
                    <div class="table-container">
                        <table class="excel-table">
                            <thead>
                                <tr>
                                    <th class="sticky-col-left bg-light" style="width: 40px;"><input type="checkbox" class="form-check-input"></th>
                                    <th class="sticky-col-left-2 bg-light" style="width: 100px;">Actions</th>
                                    <th>Vehicle No</th>
                                    <th>Client Name</th>
                                    <th>Mobile</th>
                                    <th>Type</th>
                                    <th>RC Expiry</th>
                                    <th>TP Insurance</th>
                                    <th>Comp. Insurance</th>
                                    <th>PUC (Petrol)</th>
                                    <th>PUC (Diesel)</th>
                                    <th>Fitness (New)</th>
                                    <th>Fitness (5yr+)</th>
                                    <th>Permit (State)</th>
                                    <th>Permit (India)</th>
                                    <th>Tax</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="row-expiring-soon">
                                    <td class="sticky-col-left text-center row-expiring-soon"><input type="checkbox" class="form-check-input"></td>
                                    <td class="sticky-col-left-2 row-expiring-soon text-center">
                                        <button onclick="openModal('MH02XY9999', 'Fatah Digital')" class="btn btn-link p-0 text-primary me-2"><i class="fa-brands fa-whatsapp fs-6"></i></button>
                                        <button class="btn btn-link p-0 text-secondary" title="Edit"><i class="fa-solid fa-pen"></i></button>
                                    </td>
                                    <td class="fw-bold">MH02XY9999</td>
                                    <td>Fatah Digital</td>
                                    <td>9988776655</td>
                                    <td>Truck</td>
                                    <td>18-12-2025</td> 
                                    <td class="text-danger fw-bold">20-12-2025</td> 
                                    <td>20-06-2026</td>
                                    <td class="cell-na">N/A</td>
                                    <td>30-01-2026</td>
                                    <td class="cell-na">N/A</td>
                                    <td>15-03-2026</td>
                                    <td>01-04-2026</td>
                                    <td>01-04-2026</td>
                                    <td>01-01-2026</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- All Vehicles Table -->
                <div class="card border-0 shadow-sm d-flex flex-column" style="height: 600px;">
                    <div class="card-header bg-light border-bottom d-flex align-items-center justify-content-between py-3">
                        <div class="d-flex align-items-center gap-3">
                            <h2 class="h6 fw-bold text-secondary mb-0">All Vehicles</h2>
                            <div class="position-relative">
                                <i class="fa-solid fa-search position-absolute top-50 start-0 translate-middle-y ms-3 text-secondary small"></i>
                                <input type="text" placeholder="Search vehicle, client..." class="form-control form-control-sm ps-5" style="width: 250px;">
                            </div>
                            <select class="form-select form-select-sm" style="width: auto;">
                                <option>Filter by Status</option>
                                <option>All</option>
                                <option>Expired</option>
                                <option>Upcoming</option>
                            </select>
                        </div>
                        <div>
                            <button class="btn btn-outline-danger btn-sm d-flex align-items-center gap-1 fw-medium">
                                <i class="fa-solid fa-trash-can"></i> Bulk Delete
                            </button>
                        </div>
                    </div>

                    <div class="flex-grow-1 overflow-auto table-container">
                        <table class="excel-table">
                            <thead class="sticky-top shadow-sm">
                                <tr>
                                    <th class="sticky-col-left bg-light" style="width: 40px;"><input type="checkbox" class="form-check-input"></th>
                                    <th class="sticky-col-left-2 bg-light" style="width: 100px;">Actions</th>
                                    <th>Vehicle No</th>
                                    <th>Client Name</th>
                                    <th>Mobile</th>
                                    <th>Type</th>
                                    <th>RC Expiry</th>
                                    <th>TP Insurance</th>
                                    <th>Comp. Insurance</th>
                                    <th>PUC (Petrol)</th>
                                    <th>PUC (Diesel)</th>
                                    <th>Fitness (New)</th>
                                    <th>Fitness (5yr+)</th>
                                    <th>Permit (State)</th>
                                    <th>Permit (India)</th>
                                    <th>Tax</th>
                                    <th>Driving Lic.</th>
                                    <th>Route Permit</th>
                                    <th>Conductor Lic.</th>
                                    <th>Plate Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Example Rows -->
                                <tr class="bg-white">
                                    <td class="sticky-col-left text-center bg-white"><input type="checkbox" class="form-check-input"></td>
                                    <td class="sticky-col-left-2 bg-white text-center">
                                        <button class="btn btn-link p-0 text-primary me-2"><i class="fa-brands fa-whatsapp fs-6"></i></button>
                                        <button class="btn btn-link p-0 text-secondary" title="Edit"><i class="fa-solid fa-pen"></i></button>
                                    </td>
                                    <td class="fw-bold">GJ04MK5555</td>
                                    <td>M.A. Engineering</td>
                                    <td>9123456789</td>
                                    <td>Two-wheeler</td>
                                    <td>15-05-2026</td> 
                                    <td>15-05-2026</td>
                                    <td class="cell-na">N/A</td>
                                    <td>20-05-2026</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td>01-08-2026</td>
                                    <td>10-10-2028</td>
                                    <td class="cell-na">N/A</td>
                                    <td class="cell-na">N/A</td>
                                    <td>OK</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="card-footer bg-light border-top py-2 d-flex justify-content-between align-items-center small text-secondary">
                        <span>Showing 1 to 50 of 1200 entries</span>
                        <div class="btn-group">
                            <button class="btn btn-outline-secondary btn-sm bg-white">Previous</button>
                            <button class="btn btn-primary btn-sm">1</button>
                            <button class="btn btn-outline-secondary btn-sm bg-white">2</button>
                            <button class="btn btn-outline-secondary btn-sm bg-white">3</button>
                            <button class="btn btn-outline-secondary btn-sm bg-white">Next</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Reminder Modal (Bootstrap Modal) -->
    <div class="modal fade" id="reminderModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title d-flex align-items-center gap-2">
                        <i class="fa-solid fa-paper-plane"></i> Send Manual Reminder
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="alert alert-primary d-flex flex-column gap-1 mb-4">
                        <div class="d-flex justify-content-between">
                            <span class="fw-semibold">Client Name:</span>
                            <span id="modalClientName" class="fw-medium">...</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span class="fw-semibold">Vehicle No:</span>
                            <span id="modalVehicleNo" class="fw-medium">...</span>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold text-secondary small">Select Expiring Document(s):</label>
                        <div class="border rounded p-3 bg-light" style="max-height: 150px; overflow-y: auto;">
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" checked id="doc1">
                                <label class="form-check-label small" for="doc1">
                                    Third Party Insurance <span class="text-danger fw-bold ms-1">(Expires: 20-12-2025)</span>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="doc2">
                                <label class="form-check-label small" for="doc2">
                                    PUC Diesel <span class="text-danger fw-bold ms-1">(Expires: 21-12-2025)</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold text-secondary small">Message Preview (Editable):</label>
                        <div class="position-relative">
                            <textarea class="form-control text-sm" rows="4">Dear Client, your vehicle GJ01AB1234 Third Party Insurance expires on 20-12-2025. Please contact us for renewal. - Shree Krupa PUC Centre</textarea>
                            <div class="position-absolute bottom-0 end-0 p-2 text-secondary small" style="font-size: 0.75rem;">145 chars</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-light text-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success d-flex align-items-center gap-2">
                        <i class="fa-brands fa-whatsapp"></i> Send SMS & WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Vehicle Modal (Bootstrap Modal) -->
    <div class="modal fade" id="editVehicleModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content shadow">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title d-flex align-items-center gap-2">
                        <i class="fa-solid fa-pen-to-square"></i> Edit Vehicle Details
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="editVehicleForm" class="row g-3">
                        <!-- Basic Info -->
                        <div class="col-12 border-bottom pb-2 mb-2">
                            <h6 class="text-secondary text-uppercase small fw-bold mb-0">Basic Information</h6>
                        </div>
                        
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Vehicle Number</label>
                            <input type="text" id="editVehicleNo" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Client Name</label>
                            <input type="text" id="editClientName" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Mobile Number</label>
                            <input type="text" id="editMobile" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Vehicle Type</label>
                            <select id="editVehicleType" class="form-select form-select-sm">
                                <option>Private Car</option>
                                <option>Commercial Car</option>
                                <option>Bus</option>
                                <option>Truck</option>
                                <option>Two-wheeler</option>
                                <option>Other Commercial</option>
                            </select>
                        </div>

                        <!-- Document Expiry Dates -->
                        <div class="col-12 border-bottom pb-2 mb-2 mt-4">
                            <h6 class="text-secondary text-uppercase small fw-bold mb-0">Document Expiry Dates</h6>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">RC Expiry</label>
                            <input type="date" id="editRC" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">TP Insurance</label>
                            <input type="date" id="editTP" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Comp. Insurance</label>
                            <input type="date" id="editComp" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">PUC (Petrol)</label>
                            <input type="date" id="editPUCPetrol" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">PUC (Diesel)</label>
                            <input type="date" id="editPUCDiesel" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Fitness (New)</label>
                            <input type="date" id="editFitNew" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Fitness (5yr+)</label>
                            <input type="date" id="editFitOld" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Permit (State)</label>
                            <input type="date" id="editPermitState" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Permit (India)</label>
                            <input type="date" id="editPermitIndia" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Tax</label>
                            <input type="date" id="editTax" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Driving Lic.</label>
                            <input type="date" id="editDrivingLic" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Route Permit</label>
                            <input type="date" id="editRoutePermit" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Conductor Lic.</label>
                            <input type="date" id="editConductorLic" class="form-control form-control-sm">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-secondary">Plate Status</label>
                            <select id="editPlateStatus" class="form-select form-select-sm">
                                <option>OK</option>
                                <option>Damaged</option>
                                <option>Missing</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-light text-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" onclick="saveVehicleChanges()" class="btn btn-primary d-flex align-items-center gap-2">
                        <i class="fa-solid fa-save"></i> Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Initialize Bootstrap Modals
        let reminderModal;
        let editVehicleModal;

        document.addEventListener('DOMContentLoaded', () => {
            reminderModal = new bootstrap.Modal(document.getElementById('reminderModal'));
            editVehicleModal = new bootstrap.Modal(document.getElementById('editVehicleModal'));
            
            // Sidebar Toggle Logic
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const sidebarToggle = document.getElementById('sidebarToggle');

            if(sidebarToggle) {
                sidebarToggle.addEventListener('click', () => {
                    sidebar.classList.toggle('show');
                    sidebarOverlay.classList.toggle('show');
                });
            }

            if(sidebarOverlay) {
                sidebarOverlay.addEventListener('click', () => {
                    sidebar.classList.remove('show');
                    sidebarOverlay.classList.remove('show');
                });
            }

            // Attach double click to all data cells
            const tables = document.querySelectorAll('table');
            tables.forEach(table => {
                const rows = table.querySelectorAll('tbody tr');
                rows.forEach(row => {
                    const cells = row.querySelectorAll('td');
                    // Skip first 2 columns (checkbox, actions)
                    for (let i = 2; i < cells.length; i++) {
                        cells[i].ondblclick = function() { makeEditable(this); };
                    }
                });
            });
            
            // Attach click to Edit buttons
            const editBtns = document.querySelectorAll('button[title="Edit"]');
            editBtns.forEach(btn => {
                btn.onclick = function() { openEditModal(this); };
            });
        });

        // --- Reminder Modal Logic ---
        function openModal(vehicleNo, clientName) {
            document.getElementById('modalVehicleNo').innerText = vehicleNo;
            document.getElementById('modalClientName').innerText = clientName;
            reminderModal.show();
        }

        // --- Edit Vehicle Modal Logic ---
        function openEditModal(btn) {
            const row = btn.closest('tr');
            const cells = row.querySelectorAll('td');
            
            // Map cells to form fields (Assuming column order matches)
            // 0: Checkbox, 1: Actions, 2: VehicleNo, 3: Client, 4: Mobile, 5: Type, 6: RC...
            
            document.getElementById('editVehicleNo').value = cells[2].innerText;
            document.getElementById('editClientName').value = cells[3].innerText;
            document.getElementById('editMobile').value = cells[4].innerText;
            document.getElementById('editVehicleType').value = cells[5].innerText;
            
            // Helper to parse date DD-MM-YYYY to YYYY-MM-DD for input[type=date]
            const parseDate = (text) => {
                if(!text || text.trim() === 'N/A') return '';
                const parts = text.trim().split('-');
                if(parts.length === 3) return `${parts[2]}-${parts[1]}-${parts[0]}`;
                return '';
            };

            document.getElementById('editRC').value = parseDate(cells[6].innerText);
            document.getElementById('editTP').value = parseDate(cells[7].innerText);
            document.getElementById('editComp').value = parseDate(cells[8].innerText);
            document.getElementById('editPUCPetrol').value = parseDate(cells[9].innerText);
            document.getElementById('editPUCDiesel').value = parseDate(cells[10].innerText);
            document.getElementById('editFitNew').value = parseDate(cells[11].innerText);
            document.getElementById('editFitOld').value = parseDate(cells[12].innerText);
            document.getElementById('editPermitState').value = parseDate(cells[13].innerText);
            document.getElementById('editPermitIndia').value = parseDate(cells[14].innerText);
            document.getElementById('editTax').value = parseDate(cells[15].innerText);

            // Handle extra columns if they exist
            if(cells.length > 16) {
                 document.getElementById('editDrivingLic').value = parseDate(cells[16].innerText);
                 document.getElementById('editRoutePermit').value = parseDate(cells[17].innerText);
                 document.getElementById('editConductorLic').value = parseDate(cells[18].innerText);
                 document.getElementById('editPlateStatus').value = cells[19].innerText;
            } else {
                 // Clear if not present (e.g. in summary tables)
                 document.getElementById('editDrivingLic').value = '';
                 document.getElementById('editRoutePermit').value = '';
                 document.getElementById('editConductorLic').value = '';
                 document.getElementById('editPlateStatus').value = 'OK';
            }

            editVehicleModal.show();
        }

        function saveVehicleChanges() {
            // In a real app, this would send data to backend
            // For now, we just close the modal
            alert('Changes saved successfully!');
            editVehicleModal.hide();
        }

        // --- Inline Edit Logic ---
        function makeEditable(td) {
            if (td.querySelector('input')) return; // Already editable
            if (td.classList.contains('cell-na')) return; // Don't edit N/A cells easily (optional)
            
            const currentValue = td.innerText;
            const input = document.createElement('input');
            
            // Check if it looks like a date
            const isDate = /^\d{2}-\d{2}-\d{4}$/.test(currentValue.trim());
            
            if (isDate) {
                // Convert DD-MM-YYYY to YYYY-MM-DD for input
                const parts = currentValue.trim().split('-');
                input.type = 'date';
                input.value = `${parts[2]}-${parts[1]}-${parts[0]}`;
            } else {
                input.type = 'text';
                input.value = currentValue;
            }
            
            input.className = 'w-100 h-100 border-0 bg-transparent p-0 m-0';
            input.style.outline = 'none';
            
            // Save on blur or enter
            const save = () => {
                if (input.type === 'date') {
                    // Convert back to DD-MM-YYYY
                    if (input.value) {
                        const parts = input.value.split('-');
                        td.innerText = `${parts[2]}-${parts[1]}-${parts[0]}`;
                    } else {
                        td.innerText = currentValue; // Revert if empty or handle clear
                    }
                } else {
                    td.innerText = input.value;
                }
            };

            input.onblur = save;
            input.onkeydown = function(e) {
                if(e.key === 'Enter') {
                    this.blur();
                }
            };

            td.innerText = '';
            td.appendChild(input);
            input.focus();
        }
    </script>
</body>
</html>
